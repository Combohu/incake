"use strict";require(["config"],function(){require(["jquery","tools","header","footer"],function(s,e,t,a){new Promise(function(e,t){s("header").load("/html/component/header.html",function(){e()}),s("footer").load("/html/component/footer.html")}).then(function(){t.nav(),t.localCity(),t.num()}),s("#phone").on("blur",function(){var e=s("#phone").val();/^[1][3,4,5,7,8][0-9]{9}$/.test(e)?s.ajax({type:"POST",url:"http://localhost/java_script/incake_project/server/api/php/check.php",data:{username:e},dataType:"json",success:function(e){0===e.res_body.status?s("#info").text("抱歉!用户名重复，请重新注册！").fadeIn().fadeOut():s("#info").text("恭喜您！该用户名未被使用！").fadeIn().fadeOut()}}):s("#info").text("用户名格式有误！请摆正您的态度，认真填写用户名！").fadeIn().fadeOut()}),s("#password").on("blur",function(){console.log(1245);var e=s("#password").val();/^.{6,}$/.test(e)?s("#info2").text("密码格式正确！").fadeIn().fadeOut():s("#info2").text("密码格式有误！请摆正您的态度，认真填写密码，位数为6位！").fadeIn().fadeOut()}),s("#btn-code").click(function(){var t=function(){for(var e=[],t=0;t<6;t++){var a=9*Math.random();a=parseInt(a,10),e.push(a)}return Number(e.join(""))}(),e=s("#phone").val();s.ajax({type:"get",url:"https://way.jd.com/chonry/voice?appkey=66a161b67022ed41077b09f11d50c107",data:{voiceCode:t,mobile:e},dataType:"json",success:function(e){s("#btn-code").text(e.msg),s("#yuYin-code").val()==t&&s("#info").text("语音验证码正确").fadeIn().fadeOut()}})});var o=s("#register-form"),r=/^[1][3,4,5,7,8][0-9]{9}$/,c=/^.{6,}$/;o.submit(function(e){(e=e||event).preventDefault();var t=s("#email").val(),a=s("#phone").val(),o=s("#password").val(),n=s("#weixin").val();console.log(a),r.test(a)&&c.test(o)&&(console.log(123),s.ajax({type:"GET",url:"http://localhost/java_script/incake_project/server/api/php/register.php",data:{username:a,password:o,email:t,weixin:n},dataType:"json",success:function(e){1===e.status?(alert(e.message),s.cookie("username",a,{path:"/"}),s.cookie("password",o,{path:"/"}),window.location.href="http://localhost:1807/index.html"):alert(e.message)}}))})})});